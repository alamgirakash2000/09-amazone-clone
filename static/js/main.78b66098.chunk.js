(this["webpackJsonp09-amazom-clone"]=this["webpackJsonp09-amazom-clone"]||[]).push([[0],{107:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),l=a.n(c),o=(a(68),a(12)),s=a.n(o),m=a(18),i=a(3),u=(a(70),a(14)),d=a(6),p=(a(71),Object(n.createContext)()),E=function(e){var t=e.reducer,a=e.initialState,c=e.children;return r.a.createElement(p.Provider,{value:Object(n.useReducer)(t,a)},c)},f=function(){return Object(n.useContext)(p)},h=a(36),b=a.n(h),g=b.a.initializeApp({apiKey:"AIzaSyD6miqZHIPraVrHYve8TfgIBHi9EKqjVz0",authDomain:"clone-904cc.firebaseapp.com",databaseURL:"https://clone-904cc.firebaseio.com",projectId:"clone-904cc",storageBucket:"clone-904cc.appspot.com",messagingSenderId:"262331714843",appId:"1:262331714843:web:d184902bdf22ba29bc17be",measurementId:"G-6JK8M8PPMH"}),v=(g.firestore(),g.auth());b.a.storage();var N=function(e){var t=e.searchedText,a=e.setSearchedText,n=f(),c=Object(i.a)(n,2),l=c[0],o=l.basket,s=l.user,m=c[1];return r.a.createElement("div",{className:"position-sticky sticky-top"},r.a.createElement("nav",{className:"header"},r.a.createElement(u.b,{to:"/"},r.a.createElement("img",{src:"http://pngimg.com/uploads/amazon/amazon_PNG11.png",alt:"",className:"header__logo"})),r.a.createElement("div",{className:"input-group my-auto d-md-flex d-none"},r.a.createElement("input",{type:"text",className:"form-control","aria-describedby":"basic-addon2",value:t,onChange:function(e){a(e.target.value)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text",id:"basic-addon2"},r.a.createElement("i",{className:"fas fa-search"})))),r.a.createElement("div",{className:"header__nav ml-auto"},r.a.createElement(u.b,{to:!s&&"/login",className:"header__link"},r.a.createElement("div",{onClick:function(){localStorage.removeItem("id"),m({type:"EMPTY"}),s&&(v.signOut(),m({type:"SET_USER",user:null}),localStorage.removeItem("amazon_user"))},className:"d-flex flex-column header__option"},r.a.createElement("span",{className:"header__optionLine_one"},"Hello ",null===s||void 0===s?void 0:s.name),r.a.createElement("span",{className:"header__optionLine_two"},s?"Sign Out":"Sign In"))),r.a.createElement(u.b,{to:"/myorders",className:"header__link"},r.a.createElement("div",{className:"d-flex flex-column header__option"},r.a.createElement("span",{className:"header__optionLine_one"},"Returns"),r.a.createElement("span",{className:"header__optionLine_two"},"& Orders"))),r.a.createElement(u.b,{to:"/checkout",className:"header__link"},r.a.createElement("div",{className:"header__optionBasket"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-shopping-cart fa-2x"})),r.a.createElement("span",{className:"mx-2"},null===o||void 0===o?void 0:o.length))))))},_=(a(86),a(57));a(87);var y=function(e){var t=e.props,a=f(),n=Object(i.a)(a,2),c=n[0].basket,l=n[1];return r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"product"},r.a.createElement("div",{className:"product__info"},r.a.createElement("p",{className:"product__title m-0"},t.name),r.a.createElement("p",{className:"product__price m-0 mt-2"},r.a.createElement("small",null,"$"),r.a.createElement("strong",null,t.price)),r.a.createElement("p",null,"Stock : ",t.stock),r.a.createElement("div",{className:"product__rating d-flex m-0"},Array(t.star).fill().map((function(e,t){return r.a.createElement("p",{key:t,className:"my-auto"},"\u2b50")}))),r.a.createElement("small",null,"(",t.starCount,")")),r.a.createElement("img",{src:t.img,alt:"cant load",className:"product__image"}),r.a.createElement("div",{className:"d-flex"},r.a.createElement("button",{className:"product__button",onClick:function(){l({type:"SET_BASKET",basket:[].concat(Object(_.a)(c),[{id:t.key,title:t.name,image:t.img,price:t.price,rating:t.star}])})}},"Add to Basket"))))};var O=function(e){var t=e.products;return r.a.createElement("div",{className:"home mx-auto container"},r.a.createElement("img",{className:"home__image",src:"https://images-eu.ssl-images-amazon.com/images/G/02/digital/video/merch2016/Hero/Covid19/Generic/GWBleedingHero_ENG_COVIDUPDATE__XSite_1500x600_PV_en-GB._CB428684220_.jpg",alt:""}),r.a.createElement("div",{className:"row z-index-1"},t.length>0?t.map((function(e){return r.a.createElement(y,{key:e._id,props:e})})):r.a.createElement("h2",{className:"text-center ml-5"},"Sorry!! No products found.")))};a(35);var k=function(e){var t=e.product,a=f(),n=Object(i.a)(a,2),c=(n[0].basket,n[1]);return r.a.createElement("div",{className:"checkoutProduct d-flex my-3 py-2"},r.a.createElement("img",{src:t.image,alt:"",className:"checkoutProduct__image mr-3"}),r.a.createElement("div",{className:"checkoutProduct__info"},r.a.createElement("p",{className:"checkoutProduct__title m-0"},r.a.createElement("strong",null,t.title)),r.a.createElement("p",{className:"checkoutProduct__price m-0"},r.a.createElement("small",null,"$"),r.a.createElement("strong",null,t.price)),r.a.createElement("div",{className:"checkoutProduct__rating d-flex m-0"},Array(t.rating).fill().map((function(){return r.a.createElement("p",null,"\u2b50")}))),r.a.createElement("button",{className:"checkoutProduct__button",onClick:function(){c({type:"REMOVE_FROM_BASKET",id:t.id})}},"Remove from Basket")))},x=a(24),S=function(e){var t=0;return e.forEach((function(e){return t+=e.price})),t.toFixed(2)},j=function(e,t){switch(t.type){case"SET_BASKET":return Object(x.a)({},e,{basket:t.basket});case"SET_USER":return Object(x.a)({},e,{user:t.user});case"REMOVE_FROM_BASKET":return Object(x.a)({},e,{basket:e.basket.filter((function(e){return e.id!==t.id}))});case"LOGOUT":return Object(x.a)({},e,{user:null});default:return e}};var w=function(){var e=f(),t=Object(i.a)(e,1)[0].basket,a=Object(d.g)();return r.a.createElement("div",{className:"subtotal"},r.a.createElement("h5",null,"Subtotal(",null===t||void 0===t?void 0:t.length,"):",r.a.createElement("strong",null," $",S(t)," ")),r.a.createElement("small",{className:"subtotal__gift"},r.a.createElement("input",{type:"checkbox"})," This order contains a gift"),r.a.createElement("button",{onClick:function(){a.push("/shipment")},className:"checkoutProduct__button form-control mt-2"},"Proceed Checkout"))};var C=function(){var e=f(),t=Object(i.a)(e,1)[0].basket;return r.a.createElement("div",{className:"checkout container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement("img",{className:"checkout__ad",src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg",alt:""}),0===(null===t||void 0===t?void 0:t.length)?r.a.createElement("div",null,r.a.createElement("h2",null,"Your Basket is Empty"),r.a.createElement("p",null,'To buy one or more item, please click the "Add to Basket" button placed next to the item.')):r.a.createElement("div",null,r.a.createElement("h2",null,"Your Basket have these items in the Basket"),r.a.createElement("hr",null),null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(k,{key:e.id,product:e})})))),r.a.createElement("div",{className:"col-md-3"},t.length>0&&r.a.createElement(w,null))))},T=(a(88),a(136));var P=function(){var e=Object(d.g)(),t=(Object(d.h)().state||{from:{pathname:"/"}}).from,a=Object(n.useState)(!0),c=Object(i.a)(a,2),l=c[0],o=c[1],u=f(),p=Object(i.a)(u,2),E=(p[0].user,p[1]),h=Object(n.useState)(""),b=Object(i.a)(h,2),g=b[0],N=b[1],_=Object(n.useState)(""),y=Object(i.a)(_,2),O=y[0],k=y[1],x=Object(n.useState)(""),S=Object(i.a)(x,2),j=S[0],w=S[1],C=Object(n.useState)(""),P=Object(i.a)(C,2),I=P[0],B=P[1],z=Object(n.useState)(""),A=Object(i.a)(z,2),M=A[0],R=A[1],Y=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return localStorage.getItem("amazon_user")&&(E({type:"SET_USER",user:JSON.parse(localStorage.getItem("amazon_user"))}),e.replace(t)),r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login__container text-center"},l?r.a.createElement("form",{action:""},r.a.createElement("h1",null,"Sign In"),r.a.createElement(T.a,{required:!0,error:!Y.test(O),id:"outlined-error-helper-text",label:"Enter email",variant:"outlined",className:"form-control my-3",value:O,onChange:function(e){return k(e.target.value)}}),r.a.createElement(T.a,{required:!0,error:I.length>0&&I.length<6,id:"outlined-error-helper-text",label:"Enter password",variant:"outlined",type:"password",className:"form-control my-3",value:I,onChange:function(e){return B(e.target.value)}}),r.a.createElement("button",{type:"submit",className:"login__signInButton form-control my-4",onClick:function(a){a.preventDefault(),v.signInWithEmailAndPassword(O,I).then((function(a){var n=a.user,r=n.displayName,c=n.email,l=n.phoneNumber;E({type:"SET_USER",user:{name:r,email:c,phone:l}}),localStorage.setItem("amazon_user",JSON.stringify({name:r,email:c,phone:l})),e.replace(t)})).catch((function(e){document.getElementById("login-failed").innerText="".concat(e)}))}},"Sign In"),r.a.createElement("p",{className:"text-danger",id:"login-failed"}),r.a.createElement("p",{className:"text-center"},"No account?"," ",r.a.createElement("button",{className:"btn bg-none text-primary",onClick:function(e){return o(!1)}},"Sign up"),"now.")):r.a.createElement("form",{action:""},r.a.createElement("h1",null,"Sign Up"),r.a.createElement(T.a,{required:!0,id:"outlined-error-helper-text",label:"Enter your name",variant:"outlined",className:"form-control my-3",value:g,onChange:function(e){return N(e.target.value)}}),r.a.createElement(T.a,{required:!0,error:!Y.test(O),id:"outlined-error-helper-text",label:"Enter email",variant:"outlined",className:"form-control my-3",value:O,onChange:function(e){return k(e.target.value)}}),r.a.createElement(T.a,{required:!0,error:j.length<11&&j.length>0,id:"outlined-error-helper-text",label:"Enter Mobile no",variant:"outlined",className:"form-control my-3",value:j,onChange:function(e){return w(e.target.value)}}),r.a.createElement(T.a,{required:!0,error:I.length>0&&I.length<6,id:"outlined-error-helper-text",label:"Enter password",variant:"outlined",type:"password",className:"form-control my-3",value:I,onChange:function(e){return B(e.target.value)}}),r.a.createElement(T.a,{required:!0,error:M.length>0&&I!==M,id:"outlined-error-helper-text",label:"Confirm password",variant:"outlined",type:"password",className:"form-control my-3",value:M,onChange:function(e){return R(e.target.value)}}),r.a.createElement("button",{className:"login__signUpButton btn btn-success mt-4",onClick:function(a){if(a.preventDefault(),document.getElementById("login-failed").innerHTML="",!g||!Y.test(O)||!I||I!==M||j.length<11)return document.getElementById("login-failed").innerHTML="Please enter all information correctly",void alert("Resitration failed, try again");v.createUserWithEmailAndPassword(O,I).then(function(){var a=Object(m.a)(s.a.mark((function a(n){var r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=v.currentUser,a.next=3,r.updateProfile({displayName:g,phoneNumber:j}).then((function(e){var t=v.currentUser,a=t.displayName,n=t.email,r=t.phoneNumber;E({type:"SET_USER",user:{name:a,email:n,phone:r}}),localStorage.setItem("amazon_user",JSON.stringify({name:a,email:n,phone:r}))}));case 3:alert("Successfully registered"),e.replace(t);case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){document.getElementById("login-failed").innerText="".concat(e),alert("Resitration failed, try again")}))}},"Create your amazon account"),r.a.createElement("p",{className:"text-danger",id:"login-failed"}),r.a.createElement("p",{className:"text-center"},"Already registered?"," ",r.a.createElement("button",{className:"btn bg-none text-primary",onClick:function(e){return o(!0)}},"Login"),"here."))))},I=(a(89),a(54)),B=a.n(I).a.create({baseURL:"https://amazon-by-akash.herokuapp.com"}),z=a(55),A=a.n(z);var M=function(){var e=f(),t=Object(i.a)(e,2),a=t[0].user,c=(t[1],Object(n.useState)()),l=Object(i.a)(c,2),o=l[0],u=l[1];return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B.get("/api/order/".concat(a.email)).then((function(e){u(e.data)})).catch((function(e){return alert(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:"text-center orders my-3"},(null===o||void 0===o?void 0:o.length)>0?r.a.createElement("div",{className:"d-flex flex-column justify-content-center w-100"},r.a.createElement("h3",{className:"text-info"},"Your Order history"),r.a.createElement("ul",{className:"m-auto order__list"},o.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("div",{className:"p-1 text-start order"},r.a.createElement("div",{className:"order__left"},r.a.createElement("h6",{className:"text-warning"},"Total ",e.items.length," products."),r.a.createElement("h6",{className:"text-light"},"Total $",e.price+e.shipment," (including shipment)"," ")),r.a.createElement("div",{className:"order__right"},r.a.createElement("p",{className:"order__date"},A()(e.timestamp).format("MMMM Do YYYY, h:mm:ss a")))))})))):r.a.createElement("h3",{className:"text-danger"},"Sorry !! You haven't place any order yet"))},R=(a(107),a(23));var Y=function(e){var t=e.newOrder,a=f(),c=Object(i.a)(a,2),l=c[0],o=(l.user,l.basket,c[1]),u=Object(d.g)(),p=Object(n.useState)(null),E=Object(i.a)(p,2),h=E[0],b=E[1],g=Object(R.useStripe)(),v=Object(R.useElements)(),N=(parseFloat(t.price)+parseFloat(t.shipment)).toFixed(2),_=function(){var e=Object(m.a)(s.a.mark((function e(a){var n,r,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),g&&v){e.next=3;break}return e.abrupt("return");case 3:return n=v.getElement(R.CardElement),e.next=6,g.createPaymentMethod({type:"card",card:n});case 6:if(r=e.sent,c=r.error,l=r.paymentMethod,!c){e.next=14;break}b(c.message),console.log("[error]",c),e.next=17;break;case 14:return b(null),e.next=17,B.post("/api/order",Object(x.a)({},t,{paymentInfo:{id:l.id,card:l.card}})).then((function(e){alert("Order placed successfully"),o({type:"SET_BASKET",basket:[]}),u.replace("/myorders")})).catch((function(e){return e.message}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"title text-center"},r.a.createElement("h3",null,"Make Payment")),r.a.createElement("div",{className:"payment__details w-75 mx-auto mt-5"},r.a.createElement("form",{onSubmit:_},r.a.createElement(R.CardElement,null),r.a.createElement("button",{type:"submit",className:" btn btn-block btn-success my-4",disabled:!g},g?r.a.createElement("p",null,"PAY $",N):r.a.createElement("p",null,"Processing...")),h&&r.a.createElement("p",{className:"text-danger"},h))))},L=a(56),U=Object(L.a)("pk_test_51HaDbiFGo8R13963km0FIpFOdX2AL0MwaslsdgkrYdHF9NKPNVNjZy7VWFmYl0m0YoV1w2hYjtM2VR7GyWizchwk00eNge5e6E");var F=function(){var e=f(),t=Object(i.a)(e,2),a=t[0],c=a.user,l=a.basket,o=(t[1],Object(n.useState)(c.phone)),d=Object(i.a)(o,2),p=d[0],E=d[1],h=Object(n.useState)(""),b=Object(i.a)(h,2),g=b[0],v=b[1],N=Object(n.useState)(!1),_=Object(i.a)(N,2),y=_[0],O=_[1],k=Object(n.useState)({}),x=Object(i.a)(k,2),j=x[0],w=x[1],C=function(){var e=Object(m.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a={email:c.email,phone:p,address:g,items:l.map((function(e){return e.id})),price:parseFloat(S(l)),shipment:.05*S(l)},w(a),O(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container my-5"},r.a.createElement("h1",{className:"text-center text-info"},"Confirm your order"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},y?r.a.createElement(R.Elements,{stripe:U},r.a.createElement(Y,{newOrder:j})):r.a.createElement("form",{className:"shipment__form",onSubmit:C},r.a.createElement(T.a,{id:"outlined-error-helper-text",label:"Your name",variant:"outlined",className:"form-control my-3",value:c.name}),r.a.createElement(T.a,{id:"outlined-error-helper-text",label:"Your email",variant:"outlined",className:"form-control my-3",value:c.email}),r.a.createElement(T.a,{required:!0,id:"outlined-error-helper-text",label:"Mobile no",variant:"outlined",className:"form-control my-3",value:p,onChange:function(e){return E(e.target.value)}}),r.a.createElement(T.a,{required:!0,id:"outlined-error-helper-text",label:"Address",variant:"outlined",className:"form-control my-3",value:g,onChange:function(e){return v(e.target.value)}}),r.a.createElement("button",{type:"submit",className:"btn btn-block btn-success my-4"},"PLACE ORDER"))),r.a.createElement("div",{className:"col-md-6 mt-5"},r.a.createElement("div",{className:"p-3"},r.a.createElement("h3",{className:"text-primary"},"Your order history"),r.a.createElement("p",null,r.a.createElement("strong",{className:"text-success"},"Total items : "),l.length),r.a.createElement("p",null,r.a.createElement("strong",{className:"text-success"},"Total Price :")," "," $ ",S(l)," "),r.a.createElement("p",null,r.a.createElement("strong",{className:"text-success"}," Shipment Charge :")," $ ",(.05*S(l)).toFixed(2)),r.a.createElement(u.b,{to:"/checkout",className:"btn btn-primary mt-3"},"Edit Products")))))},q=a(58);var D=function(e){var t=e.children,a=Object(q.a)(e,["children"]),n=f(),c=Object(i.a)(n,1)[0].user;return r.a.createElement(d.b,Object.assign({},a,{render:function(e){var a=e.location;return c?t:r.a.createElement(d.a,{to:{pathname:"/login",state:{from:a}}})}}))};var G=function(){var e=f(),t=Object(i.a)(e,2),a=t[0].basket,c=t[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),p=o[0],E=o[1],h=Object(n.useState)(""),b=Object(i.a)(h,2),g=b[0],v=b[1];return Object(n.useEffect)((function(){B.get("/api/products").then((function(e){E(e.data)})).catch((function(e){return console.log(e.msg)})),c({type:"SET_USER",user:JSON.parse(localStorage.getItem("amazon_user"))||null}),c({type:"SET_BASKET",basket:JSON.parse(localStorage.getItem("amazon_basket"))||[]})}),[]),Object(n.useEffect)((function(){localStorage.setItem("amazon_basket",JSON.stringify(a))}),[a]),Object(n.useEffect)((function(){(function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.filter((function(e){return e.name.toLocaleLowerCase().includes(g.toLocaleLowerCase())}));case 2:return t=e.sent,e.next=5,E(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g]),r.a.createElement(u.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(N,{searchedText:g,setSearchedText:v}),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/checkout"},r.a.createElement(C,null)),r.a.createElement(d.b,{path:"/login"},r.a.createElement(P,null)),r.a.createElement(D,{path:"/shipment"},r.a.createElement(F,null)),r.a.createElement(D,{path:"/myorders"},r.a.createElement(M,null)),r.a.createElement(d.b,{exact:!0,path:"/"},r.a.createElement(O,{products:p})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,{initialState:{user:null,basket:[]},reducer:j},r.a.createElement(G,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},35:function(e,t,a){},63:function(e,t,a){e.exports=a(108)},68:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){}},[[63,1,2]]]);
//# sourceMappingURL=main.78b66098.chunk.js.map